(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{"1DEj":function(e,t,n){},QfWi:function(e,t,n){"use strict";n.r(t),n.d(t,"search",(function(){return k})),n.d(t,"renderCards",(function(){return x})),n.d(t,"loadMoreData",(function(){return w}));n("RtS0"),n("fp7Y"),n("JBxO"),n("FdtR"),n("QDHd"),n("3dw1"),n("1DEj"),n("lYjL"),n("IlJM");var a={form:document.querySelector("#search-form"),input:document.querySelector(".input"),gallery:document.querySelector(".gallery"),btnMore:document.querySelector(".btn-more"),btnBox:document.querySelector(".button-box"),spinner:document.querySelector(".loader"),checkBox:document.querySelector('[name="scroll-loader"]'),checkBoxLabel:document.querySelector("label"),btnFavorites:document.querySelector(".btn-favorites"),quantityLikes:document.querySelector(".quantity-likes")},r=n("qIEf"),l=n.n(r);var o=function(){try{if(localStorage.getItem("favorites")){var e=localStorage.getItem("favorites");return JSON.parse(e)}}catch(e){console.log("Local storage error:",e)}};var i=[];function s(e){var t,n=l()(e).parents(".card")[0].dataset.id,r=Number(e.textContent);t=n,i.find((function(e){return e.id===t}))?(i=function(e,t){return e.filter((function(e){return e.id!==t}))}(i,n),a.quantityLikes.textContent=i.length,localStorage.setItem("favorites",JSON.stringify(i)),e.textContent=r-1):(!function(e){var t={};t.id=l()(e).parents(".card")[0].dataset.id,t.webformatURL=l()(e).parents(".photo-card")[0].firstElementChild.getAttribute("src"),t.largeImageURL=l()(e).parents(".photo-card")[0].firstElementChild.dataset.largeimg.substr(1);var n=Number(e.textContent);t.likes=n+1,t.views=l()(e).parents(".stats")[0].children[1].lastElementChild.textContent,t.comments=l()(e).parents(".stats")[0].children[2].lastElementChild.textContent,t.downloads=l()(e).parents(".stats")[0].children[3].lastElementChild.textContent,i.push(t),localStorage.setItem("favorites",JSON.stringify(i))}(e),a.quantityLikes.textContent=i.length,e.textContent=r+1)}o()&&(i=o()),i.length>=1&&(a.quantityLikes.textContent=i.length);var c=n("czhI"),d=n.n(c);d.a.defaults.baseURL="https://pixabay.com/api/";var u={counter:0};function m(e){return u.counter+=1,d.a.get("?image_type=photo&orientation=horizontal&q="+e+"&page="+u.counter+"&per_page=12&key=17616559-acc4465745e7b4973de900fa6").then((function(e){return e})).catch((function(e){throw e}))}var p=n("gQfN"),f=n.n(p),h=new IntersectionObserver((function(e,t){e.forEach((function(e){e.isIntersecting&&w()}))})),g=n("VYoj"),v=n.n(g),b=(v.a.options={closeButton:!0,debug:!1,newestOnTop:!0,progressBar:!0,positionClass:"toast-top-center",preventDuplicates:!1,onclick:null,showDuration:"1000",hideDuration:"1000",timeOut:"2500",extendedTimeOut:"1000",showEasing:"swing",hideEasing:"linear",showMethod:"fadeIn",hideMethod:"fadeOut"},n("v7UC"),n("dcBu"));n("uDJT");var y=function(){if("IMG"===event.target.nodeName){var e=event.target.dataset.largeimg.substr(1);b.create('\n\t\t<img width="1400" height="900" src="'+e+'">\n\t',{closable:!0}).show()}};a.form.addEventListener("submit",(function(){if(event.preventDefault(),q=!1,a.input.value===k)return void v.a.warning("Введите другой запрос для поиска","Повторный запрос '"+k+"'");S(),k=a.input.value,u.counter=0,m(k).then((function(e){if(0===e.data.hits.length)v.a.error("Попробуйте другой поисковой запрос","Ничего не найдено"),a.btnMore.removeEventListener("click",w),a.checkBox.removeEventListener("click",E);else{var t=e.data.total,n=e.data.hits;v.a.success("По вашему запросу найдено "+t+" изображений","Запрос выполнен"),a.spinner.classList.add("disabled"),x(n),C(e.data.hits),B(L),a.gallery.addEventListener("click",M),a.checkBox.addEventListener("click",E),a.btnMore.addEventListener("click",w),a.btnMore.style="display: flex",a.checkBoxLabel.style="display: block"}})).catch((function(e){console.log(e),v.a.error('Ошибка: "'+e+'"',"Что-то пошло не так")})).finally((function(){a.spinner.classList.add("disabled"),a.input.value=""}))})),a.btnFavorites.addEventListener("click",(function(e){q=!0,S(),x(i),a.btnMore.removeEventListener("click",w),a.checkBox.removeEventListener("click",E),a.btnMore.style="display: none",a.checkBoxLabel.style="display: none",a.gallery.addEventListener("click",M),document.querySelectorAll('[data-like="like"]').forEach((function(e){e.classList.add("like")}))}));var k="",L=[];function x(e){a.gallery.insertAdjacentHTML("beforeend",f()(e)),a.btnBox.classList.remove("disabled")}function w(){a.btnMore.setAttribute("disabled",!0),a.spinner.classList.remove("disabled"),a.btnMore.querySelector("span").textContent="",m(k).then((function(e){a.spinner.classList.add("disabled"),x(e.data.hits),C(e.data.hits),B(L)})).finally((function(){a.checkBox.checked||a.btnMore.removeAttribute("disabled"),a.btnMore.querySelector("span").textContent="Load More..."})).catch((function(e){console.log(e),v.a.error('Ошибка: "'+e+'"',"Что-то пошло не так")}))}function E(){a.checkBox.checked?(a.btnMore.setAttribute("disabled",!0),h.observe(a.btnMore)):(h.disconnect(),a.btnMore.classList.remove("transparent"),a.btnMore.removeAttribute("disabled"))}function S(){a.gallery.innerHTML="",a.btnBox.classList.add("disabled"),a.btnMore.removeEventListener("click",M),a.btnMore.removeEventListener("click",w),a.checkBox.removeEventListener("click",E)}function M(e){q&&(e.target.parentElement.classList.contains("like")&&i.length>=1&&(l()(e.target).parents(".card")[0].style="display: none"));y(),"like"===e.target.parentElement.dataset.like&&function(e){"SPAN"!==e.target.nodeName&&"I"!==e.target.nodeName||("I"===e.target.nodeName?(s(e.target.nextElementSibling),e.target.parentElement.classList.toggle("like")):(s(e.target),e.target.parentElement.classList.toggle("like")))}(e)}var q=!1;function C(e){e.forEach((function(e){e.id=String(e.id),i.forEach((function(t){e.id===t.id&&L.push(e.id)}))}))}function B(e){try{e.forEach((function(e){var t=document.querySelector('[data-id="'+e+'"]');if(null!==t){t.querySelector('[data-like="like"]').classList.add("like");var n=Number(t.querySelector('[data-like="like"] > span').textContent)+1;t.querySelector('[data-like="like"] > span').textContent=n}}))}catch(e){console.log(e),v.a.error('Ошибка: "'+e+'"',"Что-то пошло не так")}}},gQfN:function(e,t,n){var a=n("mp5j");e.exports=(a.default||a).template({1:function(e,t,n,a,r){var l,o=null!=t?t:e.nullContext||{},i=e.hooks.helperMissing,s="function",c=e.escapeExpression,d=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'    <li class="card" data-id="'+c(typeof(l=null!=(l=d(n,"id")||(null!=t?d(t,"id"):t))?l:i)===s?l.call(o,{name:"id",hash:{},data:r,loc:{start:{line:2,column:30},end:{line:2,column:36}}}):l)+'">\r\n      <div class="photo-card">\r\n        <img src="'+c(typeof(l=null!=(l=d(n,"webformatURL")||(null!=t?d(t,"webformatURL"):t))?l:i)===s?l.call(o,{name:"webformatURL",hash:{},data:r,loc:{start:{line:4,column:18},end:{line:4,column:34}}}):l)+'" data-largeimg="$'+c(typeof(l=null!=(l=d(n,"largeImageURL")||(null!=t?d(t,"largeImageURL"):t))?l:i)===s?l.call(o,{name:"largeImageURL",hash:{},data:r,loc:{start:{line:4,column:52},end:{line:4,column:69}}}):l)+'" alt="image" />\r\n\r\n        <div class="stats">\r\n          <p class="stats-item" data-like="like">\r\n            <i class="material-icons">thumb_up</i>\r\n            <span class="likes">'+c(typeof(l=null!=(l=d(n,"likes")||(null!=t?d(t,"likes"):t))?l:i)===s?l.call(o,{name:"likes",hash:{},data:r,loc:{start:{line:9,column:32},end:{line:9,column:41}}}):l)+'</span>\r\n            \r\n          </p>\r\n          <p class="stats-item">\r\n            <i class="material-icons">visibility</i>\r\n            <span class="views">'+c(typeof(l=null!=(l=d(n,"views")||(null!=t?d(t,"views"):t))?l:i)===s?l.call(o,{name:"views",hash:{},data:r,loc:{start:{line:14,column:32},end:{line:14,column:41}}}):l)+'</span>\r\n          </p>\r\n          <p class="stats-item">\r\n            <i class="material-icons">comment</i>\r\n            <span class="comments">'+c(typeof(l=null!=(l=d(n,"comments")||(null!=t?d(t,"comments"):t))?l:i)===s?l.call(o,{name:"comments",hash:{},data:r,loc:{start:{line:18,column:35},end:{line:18,column:47}}}):l)+'</span>\r\n          </p>\r\n          <p class="stats-item">\r\n            <i class="material-icons">cloud_download</i>\r\n            <span class="downloads">'+c(typeof(l=null!=(l=d(n,"downloads")||(null!=t?d(t,"downloads"):t))?l:i)===s?l.call(o,{name:"downloads",hash:{},data:r,loc:{start:{line:22,column:36},end:{line:22,column:49}}}):l)+"</span>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </li>\r\n"},compiler:[8,">= 4.3.0"],main:function(e,t,n,a,r){var l;return null!=(l=(e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]})(n,"each").call(null!=t?t:e.nullContext||{},t,{name:"each",hash:{},fn:e.program(1,r,0),inverse:e.noop,data:r,loc:{start:{line:1,column:0},end:{line:27,column:9}}}))?l:""},useData:!0})}},[["QfWi",1,2]]]);
//# sourceMappingURL=main.a0115a057e0ac5b7777e.js.map